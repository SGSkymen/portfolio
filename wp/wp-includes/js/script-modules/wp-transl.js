// translations.js
const translations = {
    ru: {
        nav: {
            about: "О себе",
            skills: "Навыки",
            portfolio: "Портфолио",
            contact: "Контакты"
        },
        hero: {
            title: "Максим Еланский",
            subtitle: "Data Engineer & Digital-энтузиаст",
            description: "Создаю решения полного цикла — от data pipelines и ML-моделей до современных интерфейсов. Объединяю анализ данных, веб-разработку и дизайн для создания продуктов, которые решают реальные задачи.",
            button: "Смотреть работы →"
        },
        about: {
            title: "О себе",
            paragraph1: "Привет! Я — Data Engineer с дополнительной экспертизой в веб-разработке и дизайне. Моя уникальность в том, что я понимаю полный цикл работы с данными — от их сбора и обработки до визуализации и представления в удобных интерфейсах.",
            paragraph2: "Верю в силу чистого кода и продуманного UX. Как Data Engineer, я строю надежные data pipelines, работаю с SQL и Python, создаю системы сбора данных и проектирую базы данных. Параллельно развиваюсь как веб-разработчик, создавая современные адаптивные интерфейсы на Vue3 и JavaScript с вниманием к деталям и функциональности.",
            paragraph3: "Имею опыт в машинном обучении, работая с Scikit-learn, TensorFlow и PyTorch для извлечения ценных инсайтов. Также разрабатывал графический контент для киберспортивной организации Team Spirit, что развило мое понимание визуальной коммуникации и брендинга.",
            paragraph4: "Уверен, что сочетание технических навыков Data Engineering с дизайн-мышлением позволяет создавать по-настоящему эффективные решения.",
            button: "Связаться со мной"
        },
        skills: {
            title: "Навыки & Технологии",
            frontend: "Frontend",
            dataEngineer: "Data Engineer",
            ml: "(ML) Machine Learning",
            webScraping: "Web Scraping",
            design: "Графический Дизайн",
            tools: "Инструменты"
        },
        portfolio: {
            title: "Портфолио",
            skygaming: {
                title: "Sky Gaming",
                description: "Сайт для киберспортивной организации Sky Gaming, базируемой в Ростове-на-Дону, Россия. Адаптивный сайт с защитой кода и автообновлением.",
                link: "Перейти на сайт"
            },
            podkova: {
                title: "Podkova Gold",
                description: "Сайт для организации ШИНЫ И ДИСКИ, базируемой в Ростове-на-Дону,Россия. Адаптивный сайт с защитой кода и автообновлением.",
                link: "Перейти на сайт"
            },
            teamspirit: {
                title: "Team Spirit / Season 2025",
                description: "Создание графического контента для социальных сетей киберспортивной организации. Разработка баннеров, постов, инфографики и визуальных материалов, соответствующих бренд-гайдлайнам. Работа над вовлечением аудитории через визуальную коммуникацию.",
                link: "Перейти на Behance"
            },
            skyai: {
                title: "SkyAI Moderator",
                description: "Чат-бот в мессенджере Telegram для киберспортивной организации Sky Gaming. Модерация чатов с интеграцией машинного обучения.",
                link: "Перейти на GitHub"
            },
            overlays: {
                website: "Сайт",
                design: "Графический дизайн",
                bot: "Telegram-бот"
            }
        },
        contact: {
            title: "Контакты",
            subtitle: "Давайте работать вместе",
            description: "Открыт к новым проектам, сотрудничеству и интересным предложениям.",
            email: "Email",
            phone: "Телефон",
            location: "Локация",
            form: {
                name: "Ваше имя",
                email: "Email",
                subject: "Тема сообщения",
                message: "Ваше сообщение",
                button: "Отправить сообщение"
            }
        },
        footer: {
            brand: "Data Engineer  & Digital-энтузиаст",
            copyright: "© 2025. Все права защищены."
        }
    },
    en: {
        nav: {
            about: "About",
            skills: "Skills",
            portfolio: "Portfolio",
            contact: "Contact"
        },
        hero: {
            title: "Maxim Elanskiy",
            subtitle: "Data Engineer & Digital Enthusiast",
            description: "I create end-to-end solutions — from data pipelines and ML models to modern interfaces. Combining data analysis, web development and design to build products that solve real problems.",
            button: "View works →"
        },
        about: {
            title: "About me",
            paragraph1: "Hello! I am a Data Engineer with additional expertise in web development and design. My uniqueness lies in understanding the full data lifecycle — from collection and processing to visualization and presentation in user-friendly interfaces.",
            paragraph2: "I believe in clean code and thoughtful UX. As a Data Engineer, I build reliable data pipelines, work with SQL and Python, create data collection systems and design databases. Simultaneously, I develop as a web developer, creating modern responsive interfaces with Vue3 and JavaScript with attention to detail and functionality.",
            paragraph3: "I have experience in machine learning, working with Scikit-learn, TensorFlow and PyTorch to extract valuable insights. I also developed graphic content for the esports organization Team Spirit, which developed my understanding of visual communication and branding.",
            paragraph4: "I'm confident that combining Data Engineering technical skills with design thinking enables truly effective solutions.",
            button: "Contact me"
        },
        skills: {
            title: "Skills & Technologies",
            frontend: "Frontend",
            dataEngineer: "Data Engineer",
            ml: "(ML) Machine Learning",
            webScraping: "Web Scraping",
            design: "Graphic Design",
            tools: "Tools"
        },
        portfolio: {
            title: "Portfolio",
            skygaming: {
                title: "Sky Gaming",
                description: "Website for the esports organization Sky Gaming, based in Rostov-on-Don, Russia. Responsive website with code protection and auto-updates.",
                link: "Visit website"
            },
            podkova: {
                title: "Podkova Gold",
                description: "Website for TIRES AND WHEELS organization, based in Rostov-on-Don, Russia. Responsive website with code protection and auto-updates.",
                link: "Visit website"
            },
            teamspirit: {
                title: "Team Spirit / Season 2025",
                description: "Creating graphic content for social media of an esports organization. Development of banners, posts, infographics and visual materials that comply with brand guidelines. Working on audience engagement through visual communication.",
                link: "Go to Behance"
            },
            skyai: {
                title: "SkyAI Moderator",
                description: "Chat bot in Telegram messenger for the esports organization Sky Gaming. Chat moderation with machine learning integration.",
                link: "Go to GitHub"
            },
            overlays: {
                website: "Website",
                design: "Graphic design",
                bot: "Telegram bot"
            }
        },
        contact: {
            title: "Contact",
            subtitle: "Let's work together",
            description: "Open to new projects, collaboration and interesting opportunities.",
            email: "Email",
            phone: "Phone",
            location: "Location",
            form: {
                name: "Your name",
                email: "Email",
                subject: "Message subject",
                message: "Your message",
                button: "Send message"
            }
        },
        footer: {
            brand: "Data Engineer & Digital Enthusiast",
            copyright: "© 2025. All rights reserved."
        }
    }
};


let currentLang = 'ru';


function setLanguage(lang){if(!translations[lang])return; currentLang = lang; localStorage.setItem('portfolio-lang',lang); 
    document.documentElement.lang = lang; 
    
    updateAllTexts(lang); updateLanguageSwitcher(lang);
}
function getCurrentLanguage(){const savedLang= localStorage.getItem('portfolio-lang');
    if (savedLang && translations[savedLang])return savedLang; const browserLang= navigator.language.split('-')[0]; return translations[browserLang]? browserLang:'ru';
}
function updateAllTexts(lang){const t = translations[lang];document.querySelectorAll('.nav-link').forEach((link, index)=>{const href= link.getAttribute('href');
    if(href === '#about')link.textContent= t.nav.about;

            else if (href === '#skills') link.textContent = t.nav.skills;
            else if (href === '#portfolio') link.textContent = t.nav.portfolio;
            else if (href === '#contact') link.textContent = t.nav.contact;
});

            const heroTitle = document.querySelector('.hero-title');
            const heroSubtitle = document.querySelector('.hero-subtitle');
            const heroDescription = document.querySelector('.hero-description');
            const heroButton = document.querySelector('.hero .btn');
    
            if (heroTitle)heroTitle.textContent = t.hero.title;
            if (heroSubtitle)heroSubtitle.textContent = t.hero.subtitle;
            if (heroDescription)heroDescription.textContent = t.hero.description;
            if (heroButton)heroButton.textContent = t.hero.button;

            const aboutTitle = document.querySelector('#about .section-title');
            const aboutParagraphs = document.querySelectorAll('.about-text p');
            const aboutButton = document.querySelector('#about .btn');
    
            if (aboutTitle)aboutTitle.textContent = t.about.title;
            if (aboutParagraphs.length>=4){

                aboutParagraphs[0].textContent = t.about.paragraph1;
                aboutParagraphs[1].textContent = t.about.paragraph2;
                aboutParagraphs[2].textContent = t.about.paragraph3;
                aboutParagraphs[3].textContent = t.about.paragraph4;}

            if (aboutButton)aboutButton.textContent = t.about.button;

            const skillsTitle= document.querySelector('#skills .section-title');

            if (skillsTitle)skillsTitle.textContent = t.skills.title;
    
            const skillCategories = document.querySelectorAll('.skill-category h3');
    
            if (skillCategories.length>=6){

                skillCategories[0].textContent = t.skills.frontend;
                skillCategories[1].textContent = t.skills.dataEngineer;
                skillCategories[2].textContent = t.skills.ml;
                skillCategories[3].textContent = t.skills.webScraping;
                skillCategories[4].textContent = t.skills.design;
                skillCategories[5].textContent = t.skills.tools;}

            const portfolioTitle = document.querySelector('#portfolio .section-title');

            if (portfolioTitle)portfolioTitle.textContent = t.portfolio.title;

            const portfolioCards= document.querySelectorAll('.portfolio-card'); portfolioCards.forEach((card, index)=>{
            const title = card.querySelector('h3');
            const description = card.querySelector('p');
            const link = card.querySelector('.card-link');
            const overlay = card.querySelector('.card-overlay');
        
        if (index === 0){
            if (title)title.textContent = t.portfolio.skygaming.title;
            if (description)description.textContent = t.portfolio.skygaming.description;
            if (link)link.textContent = t.portfolio.skygaming.link;
            if (overlay)overlay.textContent = t.portfolio.overlays.website;}
            else if (index === 1){
            if (title)title.textContent = t.portfolio.podkova.title;
            if (description)description.textContent = t.portfolio.podkova.description;
            if (link)link.textContent = t.portfolio.podkova.link;
            if (overlay)overlay.textContent = t.portfolio.overlays.website;}   
            else if (index === 2){
            if (title)title.textContent = t.portfolio.teamspirit.title;
            if (description)description.textContent = t.portfolio.teamspirit.description;
            if (link)link.textContent = t.portfolio.teamspirit.link;
            if (overlay)overlay.textContent = t.portfolio.overlays.design;}   
            else if (index === 3){
            if (title)title.textContent = t.portfolio.skyai.title;
            if (description)description.textContent = t.portfolio.skyai.description;
            if (link)link.textContent = t.portfolio.skyai.link;
            if (overlay)overlay.textContent = t.portfolio.overlays.bot;
        }
});

            const contactTitle = document.querySelector('#contact .section-title');
            const contactSubtitle = document.querySelector('.contact-info h3');
            const contactDescription = document.querySelector('.contact-info p');
            const contactItems = document.querySelectorAll('.contact-item h4');
    
            if (contactTitle)contactTitle.textContent = t.contact.title;
            if (contactSubtitle)contactSubtitle.textContent = t.contact.subtitle;
            if (contactDescription)contactDescription.textContent = t.contact.description;
            if (contactItems.length>=3){

                contactItems[0].textContent = t.contact.email;
                contactItems[1].textContent = t.contact.phone;
                contactItems[2].textContent = t.contact.location;}

            const formInputs = document.querySelectorAll('#feedback-form input, #feedback-form textarea'); formInputs.forEach(input=>{
            const placeholder = input.getAttribute('placeholder');
        
            if (!placeholder) return;
            if (placeholder.includes('Ваше имя') || placeholder.includes('Your name')){input.placeholder = t.contact.form.name;}
            else if (placeholder.includes('Email')) {input.placeholder = t.contact.form.email;} 
            else if (placeholder.includes('Тема') || placeholder.includes('Message subject')){input.placeholder = t.contact.form.subject;} 
            else if (placeholder.includes('Ваше сообщение') || placeholder.includes('Your message')){input.placeholder = t.contact.form.message;}
});
    
            const formButton = document.querySelector('#feedback-form .btn');
            if (formButton) formButton.textContent = t.contact.form.button;

            const footerBrand = document.querySelector('.footer-brand p');
            const footerCopyright = document.querySelector('.footer-copyright p');
    
            if (footerBrand) footerBrand.textContent = t.footer.brand;
            if (footerCopyright) footerCopyright.textContent = t.footer.copyright;



}
function updateLanguageSwitcher(lang){

            const switchers = document.querySelectorAll('.lang-switcher');switchers.forEach(switcher=>{
            const ruBtn = switcher.querySelector('.lang-ru');
            const enBtn = switcher.querySelector('.lang-en');
        
            if (ruBtn) ruBtn.classList.toggle('active', lang === 'ru');
            if (enBtn) enBtn.classList.toggle('active', lang === 'en');
});}
document.addEventListener('DOMContentLoaded',function(){ createLanguageSwitcher(); const lang = getCurrentLanguage();
    setLanguage(lang);
});

function createLanguageSwitcher(){
            const oldSwitchers = document.querySelectorAll('.lang-switcher, .mobile-lang-toggle, .lang-dropdown');
            oldSwitchers.forEach(el=>el.remove());

            const desktopSwitcher = document.createElement('div');
            


desktopSwitcher.className = 'lang-switcher desktop-lang-switcher';      
desktopSwitcher.innerHTML = `
<button class="lang-btn lang-ru" data-lang="ru">RU</button>
<span class="lang-separator">/</span>
<button class="lang-btn lang-en" data-lang="en">EN</button>`;
    
            const navMenu = document.querySelector('.nav-menu');
            if (navMenu){
            const li = document.createElement('li');li.className= 'desktop-lang-item';li.appendChild(desktopSwitcher); navMenu.appendChild(li);
}
            const mobileLangContainer = document.createElement('div');



mobileLangContainer.className = 'mobile-lang-toggle';
mobileLangContainer.innerHTML = `
<span class="current-lang">${getCurrentLanguage().toUpperCase()}</span>
<div class="lang-dropdown">
<button class="lang-option ${getCurrentLanguage() === 'ru' ? 'active' : ''}" data-lang="ru">RU</button>
<button class="lang-option ${getCurrentLanguage() === 'en' ? 'active' : ''}" data-lang="en">EN</button>
</div>`;
    
            const navbarContainer = document.querySelector('.navbar .container');
            if (navbarContainer){
            const mobileWrapper = document.createElement('div');mobileWrapper.className = 'mobile-header-right';
            const headerBars = document.querySelector('.header__bars');mobileWrapper.appendChild(mobileLangContainer);
            if (headerBars){mobileWrapper.appendChild(headerBars);}navbarContainer.appendChild(mobileWrapper);
}

            const style = document.createElement('style');


style.textContent = `
.desktop-lang-switcher {
    display: flex; align-items: center; margin-left: 20px;
}
.desktop-lang-item {
    list-style: none;
}    
.mobile-header-right {
    display: none; align-items: center; gap: 15px;
}    
.mobile-lang-toggle {
    position: relative; cursor: pointer; user-select: none; z-index: 1002;
}
.mobile-lang-toggle .current-lang {
    font-family: 'JetBrains Mono', monospace; font-size: 15px; font-weight: 600; color: var(--black); padding: 12px 12px; background: rgba(255, 255, 255, 0.9); border-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.2); display: flex; align-items: center; gap: 6px; white-space: nowrap;
}
.mobile-lang-toggle .lang-arrow {
    font-size: 10px; margin-left: 2px; transition: transform 0.3s ease;
}   
.mobile-lang-toggle.active .lang-arrow {
    transform: rotate(180deg);
}
.lang-dropdown {
    display: none; position: absolute; top: 100%; right: 10; background: var(--white); border: 1px solid rgba(0, 0, 0, 0.2); padding: 8px 0; min-width: 70px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); margin-top: 5px; z-index: 1003;
}      
.mobile-lang-toggle.active .lang-dropdown {
    display: block; animation: fadeInDown 0.2s ease;
}
@keyframes fadeInDown {
    from{ opacity: 0;transform: translateY(-10px);}to{ opacity: 1; transform: translateY(0);}
}   
.lang-dropdown .lang-option {
    display: block; width: 100%; padding: 8px 16px; background: none; border: none; text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 15px; font-weight: 500; color: var(--black); cursor: pointer; transition: all 0.2s ease;
}
.lang-dropdown .lang-option:hover {
    background: rgba(0, 0, 0, 0.05);
}  
.lang-dropdown .lang-option.active {
    font-weight: 600; color: #000; background: rgba(0, 0, 0, 0.1);
}
.lang-btn {
    background: none; border: none; color: #000000ff; font-family: 'JetBrains Mono', monospace; font-size: 15px; cursor: pointer; padding: 5px 10px; transition: color 0.3s ease; font-weight: 500;
}
.desktop-lang-switcher .lang-btn {
    color: var(--black);
}  
.desktop-lang-switcher .lang-btn:hover {
    color: #000000ff;
}
.desktop-lang-switcher .lang-btn.active {
    color: var(--black); font-weight: 600;
}    
.lang-separator {
    color: #000000ff; font-weight: 300; margin: 0 2px;
}
@media(max-width: 768px){
.desktop-lang-switcher, .desktop-lang-item {
    display: none !important;
}
.mobile-header-right {
    display: flex; margin-left: auto; /* Это сдвинет элементы вправо */
}        
.header__bars {
    display: flex !important;
}}
@media(min-width: 769px){
.mobile-header-right {
    display: none !important;
}}    
@media(max-width: 480px){
.mobile-header-right {
    gap: 10px;
}        
.mobile-lang-toggle .current-lang {
    font-size: 14px;
    padding: 6px 10px;
}        
.lang-dropdown {
    min-width: 65px;
}} 
.navbar.menu-open .mobile-lang-toggle .current-lang {
    background: rgba(255, 255, 255, 0.95); border-color: rgba(0, 0, 0, 0.3);
}     
.navbar.menu-open .lang-dropdown {
    z-index: 1004;
}`;


    document.head.appendChild(style);


mobileLangContainer.addEventListener('click',function(e){e.stopPropagation();
    this.classList.toggle('active');

});
document.addEventListener('click',function(e){
    if (!e.target.closest('.mobile-lang-toggle')){const toggle = document.querySelector('.mobile-lang-toggle');
        if (toggle) toggle.classList.remove('active');}
});
document.querySelector('.header__bars')?.addEventListener('click',function(){const toggle = document.querySelector('.mobile-lang-toggle');
    if (toggle) toggle.classList.remove('active');

});function setupLanguageButtons(){
document.querySelectorAll('.lang-btn').forEach(btn=>{
    btn.addEventListener('click',function(e){e.stopPropagation();const lang = this.getAttribute('data-lang');
    setLanguage(lang);

});});
document.querySelectorAll('.lang-option').forEach(option=>{
    option.addEventListener('click',function(e){e.stopPropagation();const lang = this.getAttribute('data-lang');
    setLanguage(lang);

document.querySelector('.mobile-lang-toggle').classList.remove('active');
});});
}
    setupLanguageButtons();
}
